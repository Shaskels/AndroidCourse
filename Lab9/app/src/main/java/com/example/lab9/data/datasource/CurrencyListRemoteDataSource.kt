package com.example.lab9.data.datasource

import com.example.lab9.domain.Currency
import io.reactivex.Single
import javax.inject.Inject

class CurrencyListRemoteDataSource @Inject constructor(private val currencyApi: CurrencyApi) {

    fun fetchCurrencies(): Single<List<Currency>> {
        return currencyApi.getCurrencies().flatMap {
            convertToList(it)
        }
    }

    private fun convertToList(currenciesResponse: CurrenciesResponse): Single<List<Currency>> {
        val c = ArrayList<Currency>()
        val currencies = currenciesResponse.currencies
        c.add(
            Currency(
                currencies.AUD.charCode,
                currencies.AUD.name,
                currencies.AUD.nominal,
                currencies.AUD.value
            )
        )
        c.add(
            Currency(
                currencies.AZN.charCode,
                currencies.AZN.name,
                currencies.AZN.nominal,
                currencies.AZN.value
            )
        )
        c.add(
            Currency(
                currencies.GBP.charCode,
                currencies.GBP.name,
                currencies.GBP.nominal,
                currencies.GBP.value
            )
        )
        c.add(
            Currency(
                currencies.AMD.charCode,
                currencies.AMD.name,
                currencies.AMD.nominal,
                currencies.AMD.value
            )
        )
        c.add(
            Currency(
                currencies.BYN.charCode,
                currencies.BYN.name,
                currencies.BYN.nominal,
                currencies.BYN.value
            )
        )
        c.add(
            Currency(
                currencies.BGN.charCode,
                currencies.BGN.name,
                currencies.BGN.nominal,
                currencies.BGN.value
            )
        )
        c.add(
            Currency(
                currencies.BRL.charCode,
                currencies.BRL.name,
                currencies.BRL.nominal,
                currencies.BRL.value
            )
        )
        c.add(
            Currency(
                currencies.HUF.charCode,
                currencies.HUF.name,
                currencies.HUF.nominal,
                currencies.HUF.value
            )
        )
        c.add(
            Currency(
                currencies.VND.charCode,
                currencies.VND.name,
                currencies.VND.nominal,
                currencies.VND.value
            )
        )
        c.add(
            Currency(
                currencies.HKD.charCode,
                currencies.HKD.name,
                currencies.HKD.nominal,
                currencies.HKD.value
            )
        )
        c.add(
            Currency(
                currencies.GEL.charCode,
                currencies.GEL.name,
                currencies.GEL.nominal,
                currencies.GEL.value
            )
        )
        c.add(
            Currency(
                currencies.DKK.charCode,
                currencies.DKK.name,
                currencies.DKK.nominal,
                currencies.DKK.value
            )
        )
        c.add(
            Currency(
                currencies.AED.charCode,
                currencies.AED.name,
                currencies.AED.nominal,
                currencies.AED.value
            )
        )
        c.add(
            Currency(
                currencies.USD.charCode,
                currencies.USD.name,
                currencies.USD.nominal,
                currencies.USD.value
            )
        )
        c.add(
            Currency(
                currencies.EUR.charCode,
                currencies.EUR.name,
                currencies.EUR.nominal,
                currencies.EUR.value
            )
        )
        c.add(
            Currency(
                currencies.EGP.charCode,
                currencies.EGP.name,
                currencies.EGP.nominal,
                currencies.EGP.value
            )
        )
        c.add(
            Currency(
                currencies.INR.charCode,
                currencies.INR.name,
                currencies.INR.nominal,
                currencies.INR.value
            )
        )
        c.add(
            Currency(
                currencies.IDR.charCode,
                currencies.IDR.name,
                currencies.IDR.nominal,
                currencies.IDR.value
            )
        )
        c.add(
            Currency(
                currencies.KZT.charCode,
                currencies.KZT.name,
                currencies.KZT.nominal,
                currencies.KZT.value
            )
        )
        c.add(
            Currency(
                currencies.CAD.charCode,
                currencies.CAD.name,
                currencies.CAD.nominal,
                currencies.CAD.value
            )
        )
        c.add(
            Currency(
                currencies.QAR.charCode,
                currencies.QAR.name,
                currencies.QAR.nominal,
                currencies.QAR.value
            )
        )
        c.add(
            Currency(
                currencies.KGS.charCode,
                currencies.KGS.name,
                currencies.KGS.nominal,
                currencies.KGS.value
            )
        )
        c.add(
            Currency(
                currencies.CNY.charCode,
                currencies.CNY.name,
                currencies.CNY.nominal,
                currencies.CNY.value
            )
        )
        c.add(
            Currency(
                currencies.MDL.charCode,
                currencies.MDL.name,
                currencies.MDL.nominal,
                currencies.MDL.value
            )
        )
        c.add(
            Currency(
                currencies.NZD.charCode,
                currencies.NZD.name,
                currencies.NZD.nominal,
                currencies.NZD.value
            )
        )
        c.add(
            Currency(
                currencies.NOK.charCode,
                currencies.NOK.name,
                currencies.NOK.nominal,
                currencies.NOK.value
            )
        )
        c.add(
            Currency(
                currencies.PLN.charCode,
                currencies.PLN.name,
                currencies.PLN.nominal,
                currencies.PLN.value
            )
        )
        c.add(
            Currency(
                currencies.RON.charCode,
                currencies.RON.name,
                currencies.RON.nominal,
                currencies.RON.value
            )
        )
        c.add(
            Currency(
                currencies.XDR.charCode,
                currencies.XDR.name,
                currencies.XDR.nominal,
                currencies.XDR.value
            )
        )
        c.add(
            Currency(
                currencies.SGD.charCode,
                currencies.SGD.name,
                currencies.SGD.nominal,
                currencies.SGD.value
            )
        )
        c.add(
            Currency(
                currencies.TJS.charCode,
                currencies.TJS.name,
                currencies.TJS.nominal,
                currencies.TJS.value
            )
        )
        c.add(
            Currency(
                currencies.THB.charCode,
                currencies.THB.name,
                currencies.THB.nominal,
                currencies.THB.value
            )
        )
        c.add(
            Currency(
                currencies.TRY.charCode,
                currencies.TRY.name,
                currencies.TRY.nominal,
                currencies.TRY.value
            )
        )
        c.add(
            Currency(
                currencies.TMT.charCode,
                currencies.TMT.name,
                currencies.TMT.nominal,
                currencies.TMT.value
            )
        )
        c.add(
            Currency(
                currencies.UZS.charCode,
                currencies.UZS.name,
                currencies.UZS.nominal,
                currencies.UZS.value
            )
        )
        c.add(
            Currency(
                currencies.UAH.charCode,
                currencies.UAH.name,
                currencies.UAH.nominal,
                currencies.UAH.value
            )
        )
        c.add(
            Currency(
                currencies.CZK.charCode,
                currencies.CZK.name,
                currencies.CZK.nominal,
                currencies.CZK.value
            )
        )
        c.add(
            Currency(
                currencies.SEK.charCode,
                currencies.SEK.name,
                currencies.SEK.nominal,
                currencies.SEK.value
            )
        )
        c.add(
            Currency(
                currencies.CHF.charCode,
                currencies.CHF.name,
                currencies.CHF.nominal,
                currencies.CHF.value
            )
        )
        c.add(
            Currency(
                currencies.RSD.charCode,
                currencies.RSD.name,
                currencies.RSD.nominal,
                currencies.RSD.value
            )
        )
        c.add(
            Currency(
                currencies.ZAR.charCode,
                currencies.ZAR.name,
                currencies.ZAR.nominal,
                currencies.ZAR.value
            )
        )
        c.add(
            Currency(
                currencies.KRW.charCode,
                currencies.KRW.name,
                currencies.KRW.nominal,
                currencies.KRW.value
            )
        )
        c.add(
            Currency(
                currencies.JPY.charCode,
                currencies.JPY.name,
                currencies.JPY.nominal,
                currencies.JPY.value
            )
        )

        return Single.just(c)
    }
}